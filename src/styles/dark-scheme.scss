@import './abstracts/theme';
@import './utils/functions';
@import './components/namespaces';

$color-picker-shadow: _shadow(
  'bottom',
  $size: 10,
  $color: _shade(_color('base-high'), 32%)
);

$details-shadow: _shadow(
    'all',
    $size: 8,
    $color: _shade(_color('base-high'), 8%)
  ),
  _shadow('bottom', $size: 16, $color: _shade(_color('base-high'), 16%));

$dialog-shadow: _shadow(
  'bottom',
  $size: 32,
  $color: _shade(_color('base-high'), 32%)
);

$progress-shadow: _shadow(
  'inset-top-bottom',
  $size: 32,
  $color: _tint(_color('base-high'), 16%)
);

$dark-overrides: (
  $checkradio: (
    background: _gradient('base', 32%)
  ),
  $color-picker: (
    shadow: $color-picker-shadow
  ),
  $details: (
    background: _tint(_color('base-high'), 4%),
    summary-background: _tint(_color('base-high'), 4%),
    shadow: $details-shadow
  ),
  $dialog: (
    background: _color('base-high'),
    shadow: $dialog-shadow
  ),
  $document: (
    foreground: _color('light-low'),
    background: _color('base-high')
  ),
  $code: (
    background: _tint(_color('base-high'), 16%)
  ),
  $hr: (
    background: _shade(_color('base-low'), 16%)
  ),
  $icon-switch: (
    before-color: _color('light-low'),
    after-color: _color('light-low')
  ),
  $kbd: (
    border-color: _tint(_color('base-high'), 16%)
  ),
  $progress: (
    border-color: _tint(_color('base-high'), 4%),
    shadow: $progress-shadow
  ),
  $table: (
    head-separator: 2px solid _shade(_color('base-low'), 16%),
    row-separator: 1px solid _shade(_color('base-low'), 16%),
    striped-background: _tint(_color('base-high'), 4%)
  ),
  $field: (
    border-color: _color('base-low'),
    hover-border-color: _tint(_color('base-low'), 8%),
    focus-border-color: _color('accent-high'),
    disabled-border-color: _shade(_color('base-low'), 16%),
    invalid-border-color: _color('ko'),
    foreground: _color('light-high'),
    disabled-foreground: _tint(_color('base-low'), 32%),
    invalid-foreground: _color('light-high'),
    placeholder-foreground: _tint(_color('base-low'), 32%),
    hover-placeholder-foreground: _tint(_color('base-low'), 32%),
    focus-placeholder-foreground: _tint(_color('base-low'), 16%),
    disabled-placeholder-foreground: _tint(_color('base-low'), 16%),
    background: _tint(_color('base-high'), 4%),
    hover-background: _tint(_color('base-high'), 4%),
    focus-background: _tint(_color('base-high'), 8%),
    disabled-background: _color('base-high'),
    invalid-background: _tint(_color('base-high'), 8%)
  ),
  $range: (
    background: _shade(_color('base-low'), 16%),
    focus-background: _shade(_color('base-low'), 8%),
    disabled-background: _shade(_color('base-low'), 16%),
    shadow: _shadow('inset-top-bottom', $size: 8, $color: _color('base-low')),
    thumb-disabled-background: _color('base-low')
  ),
  $select: (
    border-color: _color('base-low'),
    hover-border-color: _tint(_color('base-low'), 8%),
    focus-border-color: _color('accent-high'),
    disabled-border-color: _shade(_color('base-low'), 16%),
    foreground: _color('light-low'),
    disabled-foreground: _tint(_color('base-low'), 16%),
    background: _tint(_color('base-high'), 4%),
    hover-background: _tint(_color('base-high'), 4%),
    focus-background: _tint(_color('base-high'), 8%),
    disabled-background: _color('base-high')
  )
);

// Generate the CSS Custom Properties
html[data-color-scheme='dark'] {
  @each $element, $props in $dark-overrides {
    @each $prop, $val in $props {
      #{_define-var($element, $prop)}: $val;
    }
  }

  button.muted {
    #{_define-var('button', 'foreground')}: _color('light-low');
    #{_define-var('button', 'background')}: _gradient('base');
    #{_define-var('button', 'hover-background')}: _gradient('base', 8%);
    #{_define-var('button', 'active-background')}: _gradient('base', 16%);
    #{_define-var('button', 'disabled-background')}: _color('base-low');
    #{_define-var('button', 'shadow')}: _shadow(
      'bottom',
      $size: 8,
      $color: _shade(_color('base-high'), 16%)
    );
    #{_define-var('button', 'active-shadow')}: _shadow(
      'bottom',
      $size: 4,
      $color: _shade(_color('base-high'), 16%)
    );
  }
}

// Use `icon-switch` component as color scheme trigger
.icon-switch[data-ck-trigger='set-color-scheme'] {
  --ck-icon-switch-before: svg-load('assets/sun.svg');
  --ck-icon-switch-after: svg-load('assets/moon.svg');
}

.icon-switch[data-ck-trigger='unset-color-scheme'] {
  --ck-icon-switch-before: svg-load('assets/reset.svg');
}
